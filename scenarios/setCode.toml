[[create]]
name = "Counter"
from_pool = "admin"
bytecode = "0x6080604052348015600e575f5ffd5b506101e18061001c5f395ff3fe608060405234801561000f575f5ffd5b506004361061003f575f3560e01c80633fb5c1cb146100435780638381f58a1461005f578063d09de08a1461007d575b5f5ffd5b61005d600480360381019061005891906100e4565b610087565b005b610067610090565b604051610074919061011e565b60405180910390f35b610085610095565b005b805f8190555050565b5f5481565b5f5f8154809291906100a690610164565b9190505550565b5f5ffd5b5f819050919050565b6100c3816100b1565b81146100cd575f5ffd5b50565b5f813590506100de816100ba565b92915050565b5f602082840312156100f9576100f86100ad565b5b5f610106848285016100d0565b91505092915050565b610118816100b1565b82525050565b5f6020820190506101315f83018461010f565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61016e826100b1565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036101a05761019f610137565b5b60018201905091905056fea2646970667358221220eb44b3a3fd2d561a3c414d18f3ed39e7a9b4473ecda7c318ebe3488edcbe02a864736f6c634300081b0033"

[[create]]
name = "SmartWallet"
from_pool = "admin"
bytecode = "0x6080604052348015600e575f5ffd5b5061065c8061001c5f395ff3fe608060405260043610610021575f3560e01c80633f707e6b1461002c57610028565b3661002857005b5f5ffd5b6100466004803603810190610041919061024f565b610048565b005b5f5f90505b8282905081101561016d573683838381811061006c5761006b61029a565b5b905060200281019061007e91906102d3565b90505f5f825f0160208101906100949190610354565b73ffffffffffffffffffffffffffffffffffffffff1683602001358480604001906100bf919061037f565b6040516100cd92919061041d565b5f6040518083038185875af1925050503d805f8114610107576040519150601f19603f3d011682016040523d82523d5f602084013e61010c565b606091505b50915091508161011b82610172565b9061015c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161015391906104a5565b60405180910390fd5b50505050808060010191505061004d565b505050565b60606044825110156101bb576040518060400160405280601681526020017f657865637574653a2063616c6c2072657665727465640000000000000000000081525090506101d8565b600482019150818060200190518101906101d591906105df565b90505b919050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f5f83601f84011261020f5761020e6101ee565b5b8235905067ffffffffffffffff81111561022c5761022b6101f2565b5b602083019150836020820283011115610248576102476101f6565b5b9250929050565b5f5f60208385031215610265576102646101e6565b5b5f83013567ffffffffffffffff811115610282576102816101ea565b5b61028e858286016101fa565b92509250509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f823560016060038336030381126102ee576102ed6102c7565b5b80830191505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610323826102fa565b9050919050565b61033381610319565b811461033d575f5ffd5b50565b5f8135905061034e8161032a565b92915050565b5f60208284031215610369576103686101e6565b5b5f61037684828501610340565b91505092915050565b5f5f8335600160200384360303811261039b5761039a6102c7565b5b80840192508235915067ffffffffffffffff8211156103bd576103bc6102cb565b5b6020830192506001820236038313156103d9576103d86102cf565b5b509250929050565b5f81905092915050565b828183375f83830152505050565b5f61040483856103e1565b93506104118385846103eb565b82840190509392505050565b5f6104298284866103f9565b91508190509392505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f61047782610435565b610481818561043f565b935061049181856020860161044f565b61049a8161045d565b840191505092915050565b5f6020820190508181035f8301526104bd818461046d565b905092915050565b5f5ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6104ff8261045d565b810181811067ffffffffffffffff8211171561051e5761051d6104c9565b5b80604052505050565b5f6105306101dd565b905061053c82826104f6565b919050565b5f67ffffffffffffffff82111561055b5761055a6104c9565b5b6105648261045d565b9050602081019050919050565b5f61058361057e84610541565b610527565b90508281526020810184848401111561059f5761059e6104c5565b5b6105aa84828561044f565b509392505050565b5f82601f8301126105c6576105c56101ee565b5b81516105d6848260208601610571565b91505092915050565b5f602082840312156105f4576105f36101e6565b5b5f82015167ffffffffffffffff811115610611576106106101ea565b5b61061d848285016105b2565b9150509291505056fea2646970667358221220f2815c64821a255d066a2921e24aa12fb5bdb7a13849dbcfc3f0c2ae424f7efe64736f6c634300081b0033"

[[spam]]
[spam.tx]
to = "{_sender}"
from_pool = "spammers"
# function execute(Call[] calldata calls) external payable
# struct Call { address to; uint256 value; bytes data; }
signature = "function execute((address,uint256,bytes)[])"
args = [
    # here we have to manually encode calldata
    # TODO: better interface for this in builtin setCode scenario
    "[({Counter},0,0xd09de08a)]" # 0xd09de08a calls increment()
]
authorization_address = "{SmartWallet}"

[[spam]]
[spam.tx]
to = "{Counter}"
signature = "increment()"
from_pool = "spammers"